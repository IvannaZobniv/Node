<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
   </head>
<body>
<div class="block"></div>
<input placeholder="massage"/>
<button>Send message</button>
<button class="join">Join room</button>
<button class="leave">Leave room</button>
<div class="block2"></div>

<script type="module">
    import { io } from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";
    const socket = io("http://localhost:5100", {
        auth: {
            token: "token_login"
        }
    });
    // socket.on('user:connected', (data)=>{
    //   document.write(data.message);
    // })

    socket.on("massage:get",(text)=>{
        const  p = document.createElement("p");
        p.innerText = text;
        document.querySelector(".block").appendChild(p);
    })

    document.querySelector("button").onclick =()=>{
        const text = document.querySelector("input").value;
        socket.email("message:send",text);
    }
    const joinRoom = document.createElement(".join");
    const leaveRoom = document.createElement(".leave");

    joinRoom.onclick =()=>{
        socket.email("join:room",{roomId:1})
    };

    leaveRoom.onclick =()=>{
        socket.email("left:room",{roomId:1})
    };

    socket.on("user:joined",(data)=>{
        document.write(JSON.stringify(data));
    })

    socket.on("user:left",(data)=>{
        document.write(JSON.stringify(data));
    })

</script>

</body>
</html>